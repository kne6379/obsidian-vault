---
created: 2026-02-02
updated: 2026-02-02
tags: [concept, ai, llm, rag]
status: done
---

# GraphRAG

> 지식 그래프(Knowledge Graph)를 활용하여 개체 간 관계를 구조적으로 탐색함으로써, 기존 [[RAG]]의 단순 유사도 검색이 놓치는 맥락과 연결 관계를 보완하는 검색 증강 생성 기법입니다.

---

## 1. 정의

GraphRAG(Graph Retrieval-Augmented Generation)는 [[RAG]]의 검색 단계에서 [[GLOSSARY#벡터 데이터베이스|벡터 데이터베이스]]의 유사도 검색 대신(또는 병행하여) 지식 그래프를 활용하는 아키텍처 패턴입니다. 원시 텍스트 청크가 아닌, 개체(노드)와 관계(엣지)로 구성된 서브그래프를 검색하여 LLM에 전달합니다.

기존 RAG가 "질문과 비슷한 텍스트 조각"을 찾는다면, GraphRAG는 "질문과 관련된 개체들의 연결 네트워크"를 찾아 LLM이 명시적인 사실과 관계를 기반으로 추론할 수 있도록 합니다.

---

## 2. 등장 배경 및 필요성

기존 [[RAG]]의 구조적 한계를 보완하기 위해 등장했습니다.

- **다중 홉 추론의 어려움:** 기존 RAG는 단일 검색(single-hop)에 최적화되어 있어, 여러 문서를 연결해야 답할 수 있는 복합 질문에 취약합니다. 예를 들어 "A가 B에 어떤 영향을 미치고, 그것이 C와 어떤 관계인가?"와 같은 질문에 대응하기 어렵습니다.

- **맥락 단절:** 벡터 유사도 검색은 개별 텍스트 청크를 독립적으로 검색하므로, 청크 간의 관계나 연결 맥락이 유실됩니다.

- **전체 데이터셋 요약의 한계:** "이 데이터셋의 주요 주제는 무엇인가?"와 같은 글로벌 질문에 기존 RAG는 적절히 대응하지 못합니다. 이는 본질적으로 쿼리 중심 요약 작업이기 때문입니다.

---

## 3. 작동 원리

### 3.1 인덱싱 파이프라인

Microsoft GraphRAG 기준으로, 비정형 텍스트에서 지식 그래프를 구축하는 과정은 다음과 같습니다.

1. **TextUnit 분할:** 입력 코퍼스를 분석 가능한 단위(TextUnit)로 분할합니다.
2. **그래프 추출:** LLM을 사용하여 각 TextUnit에서 개체(Entity)와 관계(Relationship)를 추출하고 요약합니다.
3. **커뮤니티 탐지:** Leiden 알고리즘을 사용하여 밀접하게 연결된 노드 그룹(커뮤니티)을 계층적으로 탐지합니다. 상위 커뮤니티는 고수준 주제를, 하위 커뮤니티는 세부 주제를 나타냅니다.
4. **커뮤니티 요약:** 각 커뮤니티에 대해 LLM으로 요약 보고서를 생성합니다. 포함된 주요 개체, 관계, 핵심 주장 등을 담습니다.
5. **문서 연결:** 원본 문서와 TextUnit 간의 매핑을 생성하여 출처 추적을 가능하게 합니다.

### 3.2 검색 모드

| 모드 | 설명 | 적합한 질문 |
|------|------|-------------|
| **Global Search** | 커뮤니티 요약을 활용한 전체적 추론 | "데이터셋의 주요 주제는?" |
| **Local Search** | 특정 개체에서 이웃 노드로 확장 탐색 | "X와 Y의 관계는?" |
| **DRIFT Search** | Local Search에 커뮤니티 맥락을 추가 | 구체적이면서 맥락이 필요한 질문 |

### 3.3 기존 RAG와의 검색 방식 비교

기존 RAG는 질문의 [[GLOSSARY#임베딩|임베딩]] 벡터와 유사한 상위 k개 텍스트 청크를 반환합니다. GraphRAG는 질문에서 핵심 개체를 식별한 뒤, 그래프를 탐색하여 관련 개체와 관계의 서브네트워크를 반환합니다.

예시:
- 기존 RAG: "태양광 패널", "에너지 저장", "그리드 효율성"에 대한 별개의 청크 검색
- GraphRAG: 태양광 패널 → 에너지 저장 → 그리드 효율성으로 이어지는 관계 경로를 탐색

---

## 4. 장점 및 이점

- **다중 홉 추론:** 관계 경로를 따라 여러 문서에 걸친 정보를 연결하여 복합 질문에 대응할 수 있습니다.

- **맥락 보존:** 개별 텍스트 조각이 아닌 개체 간 관계 네트워크를 검색하므로, 정보 간 맥락이 유지됩니다.

- **설명 가능성:** 검색된 관계와 경로가 명시적이므로, 응답의 근거와 추론 과정을 추적하기 용이합니다.

- **고밀도 개체 질의 성능:** 하나의 질문에 10개 이상의 개체가 관련된 복잡한 질의에서도 안정적인 성능을 유지합니다. 벤치마크 결과 벡터 RAG 대비 3.4배 높은 정확도를 보인 사례가 있습니다.

---

## 5. 한계점 및 고려사항

- **지식 그래프 구축 비용:** 비정형 텍스트에서 구조화된 지식 그래프를 구축하는 과정 자체가 상당한 LLM 토큰 비용과 연산 자원을 요구합니다. 인덱싱 단계에서 대량의 LLM 호출이 발생합니다.

- **데이터 갱신의 어려움:** 새로운 데이터가 추가되면 지식 그래프를 재구축하거나 증분 업데이트해야 합니다. Microsoft GraphRAG의 경우 전체 재인덱싱이 필요할 수 있어 운영 부담이 큽니다.

- **검색 지연:** 그래프 탐색은 단순 벡터 유사도 검색보다 연산량이 많아, 특히 다중 홉 질의에서 응답 지연이 발생할 수 있습니다.

- **구축 복잡도:** 벡터 DB 기반 RAG에 비해 파이프라인 구성이 복잡하고, 그래프 데이터베이스(Neo4j 등) 운영 경험이 필요합니다.

---

## 6. RAG vs GraphRAG 비교

| 구분 | RAG | GraphRAG |
|------|-----|----------|
| **검색 방식** | 벡터 유사도 기반 상위 k개 청크 | 개체/관계 그래프 탐색 (서브그래프) |
| **적합한 질문** | 단일 사실 확인, 단순 Q&A | 다중 홉 추론, 관계 탐색, 전체 요약 |
| **맥락 처리** | 청크 단위 (맥락 단절 가능) | 관계 네트워크 (맥락 보존) |
| **구축 비용** | 상대적으로 저렴 | 지식 그래프 구축에 높은 비용 |
| **응답 지연** | 빠름 | 그래프 탐색으로 상대적으로 느림 |
| **운영 복잡도** | 낮음 (벡터 DB) | 높음 (그래프 DB + 인덱싱 파이프라인) |

2025년 연구에 따르면, RAG만 답할 수 있는 질문이 11.6%, GraphRAG만 답할 수 있는 질문이 13.6%로 양쪽의 강점이 상호 보완적입니다. 실무에서는 벡터 검색과 그래프 탐색을 결합한 하이브리드 접근이 주목받고 있습니다.

---

## 관련 문서

- [[RAG]] - 기존 검색 증강 생성 기술. GraphRAG의 기반 개념
- [[Docker]] - GraphRAG 시스템 배포 시 컨테이너 활용

---

## 참고 자료

- [Microsoft GraphRAG 공식 문서](https://microsoft.github.io/graphrag/) - Microsoft의 GraphRAG 구현체
- [From Local to Global: A Graph RAG Approach to Query-Focused Summarization](https://www.microsoft.com/en-us/research/publication/from-local-to-global-a-graph-rag-approach-to-query-focused-summarization/) - GraphRAG 원논문
- [RAG vs. GraphRAG: A Systematic Evaluation and Key Insights](https://arxiv.org/abs/2502.11371) - RAG와 GraphRAG 비교 연구 (2025)
- [Neo4j GraphRAG 가이드](https://neo4j.com/blog/genai/what-is-graphrag/) - Neo4j 기반 GraphRAG 설명
- [GraphRAG Intro](https://graphrag.com/concepts/intro-to-graphrag/) - GraphRAG 개념 소개
