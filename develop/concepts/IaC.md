---
created: 2026-02-24
updated: 2026-02-24
tags: [concept, devops, cloud, infrastructure]
status: done
---

# IaC

> 인프라를 코드로 정의하고 버전 관리하여, 수동 작업 없이 일관되게 프로비저닝하는 방법론입니다.

---

## 1. 정의

IaC(Infrastructure as Code)는 서버, 네트워크, 데이터베이스 등 인프라 자원을 수동으로 설정하는 대신, 코드 파일로 정의하고 자동으로 생성/변경/삭제하는 방식입니다.

인프라의 원하는 상태를 코드로 선언하면, IaC 도구가 현재 상태와 비교하여 필요한 변경만 자동으로 수행합니다. 이를 통해 인프라를 소프트웨어와 동일한 방식으로 버전 관리, 코드 리뷰, 테스트할 수 있습니다.

---

## 2. 등장 배경 및 필요성

### 콘솔 기반 관리의 한계

전통적인 인프라 관리는 클라우드 콘솔(AWS Console 등)에서 직접 클릭하여 설정하는 방식이었습니다. 이 방식에는 근본적인 문제가 있습니다.

| 문제 | 설명 |
|------|------|
| **재현 불가** | 동일한 환경을 다시 만들 때 같은 순서로 같은 설정을 클릭해야 하며, 실수가 발생하기 쉬움 |
| **설정 드리프트** | 시간이 지남에 따라 개발/스테이징/프로덕션 환경의 설정이 미묘하게 달라짐 |
| **변경 추적 불가** | 누가, 언제, 왜 설정을 변경했는지 기록이 남지 않음 |
| **휴먼 에러** | 수동 작업 과정에서 설정 누락, 오타, 순서 실수가 빈번하게 발생 |
| **확장 한계** | 서버가 수십~수백 대로 늘어나면 수동 관리가 불가능 |

### IaC가 해결하는 문제

코드로 인프라를 관리하면 위 문제가 구조적으로 해결됩니다.

- **재현성**: 동일한 코드를 실행하면 동일한 환경이 생성됨
- **변경 이력**: Git으로 모든 변경 내역이 추적됨
- **자동화**: 사람의 개입 없이 CI/CD 파이프라인에서 인프라 배포 가능
- **코드 리뷰**: 인프라 변경도 PR로 검토할 수 있음

---

## 3. 작동 원리 / 핵심 개념

### 3.1 선언형과 명령형

IaC 도구는 크게 두 가지 접근 방식으로 나뉩니다.

**선언형(Declarative)**: "원하는 최종 상태"를 기술합니다. 도구가 현재 상태를 파악하고, 원하는 상태에 도달하기 위한 단계를 자동으로 결정합니다.

```hcl
# Terraform 예시 - "EC2 인스턴스가 존재해야 한다"
resource "aws_instance" "web" {
  ami           = "ami-0c55b159cbfafe1f0"
  instance_type = "t3.micro"
}
```

**명령형(Imperative)**: "실행할 단계"를 순서대로 기술합니다. 무엇을 어떤 순서로 할지 직접 지정합니다.

```python
# AWS CDK 예시 - 프로그래밍 언어로 인프라를 정의하지만,
# 내부적으로는 선언형(CloudFormation)으로 변환됨
instance = ec2.Instance(self, "Web",
    instance_type=ec2.InstanceType.of(
        ec2.InstanceClass.T3, ec2.InstanceSize.MICRO
    ),
    machine_image=ec2.MachineImage.latest_amazon_linux2()
)
```

대부분의 현대 IaC 도구는 **선언형** 방식을 채택하거나, 명령형 코드를 선언형으로 변환합니다. 선언형이 멱등성을 보장하기 쉽고, 상태 관리에 유리하기 때문입니다.

### 3.2 상태 관리

IaC 도구는 "현재 인프라가 어떤 상태인지"를 추적해야 합니다. 이를 **상태(State)**라고 합니다.

- **상태 파일 기반**: [[Terraform]]은 별도의 상태 파일(`.tfstate`)에 현재 인프라 상태를 저장합니다. 코드 변경 시 상태 파일과 비교하여 변경 사항을 계산합니다.
- **API 기반**: [[CloudFormation]]은 AWS 내부에서 상태를 관리합니다. 별도의 상태 파일이 필요 없습니다.

### 3.3 프로비저닝과 설정 관리

IaC는 넓은 개념이며, 실제로는 두 단계로 나뉩니다.

| 단계 | 목적 | 대표 도구 |
|------|------|----------|
| **프로비저닝** | 인프라 자원 생성/변경/삭제 | [[Terraform]], [[CloudFormation]], [[AWS CDK]] |
| **설정 관리** | 생성된 서버 내부 소프트웨어 설치/설정 | Ansible, Chef, Puppet |

이 문서와 하위 문서에서는 **프로비저닝** 도구를 중심으로 다룹니다.

### 3.4 불변 인프라

IaC와 함께 자주 사용되는 개념입니다. 서버를 수정하는 대신, 새로운 설정이 적용된 서버를 새로 만들고 기존 서버를 교체하는 방식입니다. [[Docker]] 컨테이너가 대표적인 불변 인프라의 예입니다.

---

## 4. 장점 및 이점

- **일관성**: 동일한 코드는 항상 동일한 인프라를 생성합니다. 환경 간 차이가 사라집니다.
- **버전 관리**: Git으로 인프라 변경 이력을 추적하고, 문제 발생 시 이전 버전으로 롤백할 수 있습니다.
- **자동화**: CI/CD 파이프라인과 통합하여 인프라 변경을 자동으로 배포할 수 있습니다.
- **코드 리뷰**: 인프라 변경을 PR로 검토하여 실수를 사전에 방지할 수 있습니다.
- **문서화 효과**: 코드 자체가 인프라의 현재 상태를 설명하는 문서 역할을 합니다.
- **속도**: 수동으로 수십 분 걸리는 작업을 몇 분 내에 자동으로 완료할 수 있습니다.

---

## 5. 한계점 및 고려사항

- **학습 곡선**: 각 도구마다 고유한 문법과 개념을 학습해야 합니다. 특히 상태 관리는 초기에 혼란을 줄 수 있습니다.
- **상태 관리 복잡성**: 상태 파일 손상, 동시 수정 충돌, 수동 변경과의 불일치 등 상태 관련 문제가 발생할 수 있습니다.
- **설정 드리프트**: 누군가 콘솔에서 직접 변경하면 코드와 실제 상태가 달라집니다. 이를 감지하고 동기화하는 절차가 필요합니다.
- **초기 도입 비용**: 기존 인프라를 코드로 전환(import)하는 과정이 필요하며, 팀 전체가 새로운 워크플로우에 적응해야 합니다.

---

## 6. 실무 적용 가이드

### 6.1 주요 도구 비교

| 항목 | [[Terraform]] | [[AWS CDK]] | [[CloudFormation]] |
|------|-----------|---------|----------------|
| **제공사** | HashiCorp | AWS | AWS |
| **언어** | HCL | TypeScript, Python 등 | JSON/YAML |
| **클라우드 지원** | 멀티 클라우드 | AWS 전용 | AWS 전용 |
| **상태 관리** | 상태 파일 (외부 저장 필요) | AWS 내부 (CloudFormation) | AWS 내부 |
| **추상화 수준** | 중간 | 높음 (L2/L3 Construct) | 낮음 (리소스 1:1 매핑) |
| **학습 곡선** | 중간 (HCL 학습 필요) | 낮음 (기존 언어 활용) | 높음 (장황한 템플릿) |
| **생태계** | 매우 풍부 (수천 개 Provider) | AWS 생태계 | AWS 생태계 |

### 6.2 선택 기준

- **멀티 클라우드가 필요하다면**: [[Terraform]]이 유일한 선택지입니다. AWS, GCP, Azure를 하나의 도구로 관리할 수 있습니다.
- **AWS만 사용하고 프로그래밍 언어를 선호한다면**: [[AWS CDK]]가 적합합니다. 조건문, 반복문, 타입 검사 등 프로그래밍 언어의 이점을 활용할 수 있습니다.
- **AWS만 사용하고 추가 도구 도입이 부담이라면**: [[CloudFormation]]은 AWS에 내장되어 있어 별도 설치 없이 바로 사용할 수 있습니다.

---

## 관련 문서

- [[Terraform]] - HCL 기반 멀티 클라우드 IaC 도구
- [[AWS CDK]] - 프로그래밍 언어 기반 AWS IaC 프레임워크
- [[CloudFormation]] - AWS 네이티브 IaC 서비스
- [[Docker]] - 불변 인프라의 대표적 구현체
- [[ECS]] - IaC로 관리하는 대표적 AWS 컨테이너 서비스
- [[멱등성]] - 선언형 IaC가 보장하는 핵심 속성

---

## 참고 자료

- [Terraform Documentation](https://developer.hashicorp.com/terraform/docs) - HashiCorp 공식 문서
- [AWS CDK Documentation](https://docs.aws.amazon.com/cdk/) - AWS CDK 공식 문서
- [AWS CloudFormation Documentation](https://docs.aws.amazon.com/cloudformation/) - CloudFormation 공식 문서
