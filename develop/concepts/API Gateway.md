---
created: 2026-02-02
updated: 2026-02-02
tags: [concept, backend, api, msa]
status: done
---

# API Gateway

> 마이크로서비스 아키텍처(MSA)에서 클라이언트와 내부 서비스들 사이의 단일 진입점 역할을 수행하며, 라우팅/인증/트래픽 제어 등 공통 관심사를 통합 처리하는 시스템입니다.

---

## 1. 정의

API Gateway는 클라이언트와 내부 마이크로서비스들 사이에서 단일 진입점(Single Entry Point) 역할을 수행하는 시스템입니다. '교통 경찰'처럼 요청을 적절한 서비스로 라우팅하고, 인증/로깅/트래픽 제어 등 공통 기능을 중앙에서 처리합니다.

---

## 2. 등장 배경 및 필요성

게이트웨이가 없을 경우 다음과 같은 문제가 발생합니다.

- **엔드포인트 노출:** 클라이언트가 모든 서비스의 엔드포인트를 직접 알아야 합니다.
- **공통 기능 중복:** 인증, 로깅 같은 공통 기능을 각 서비스마다 중복 구현해야 합니다.
- **보안 취약:** 내부 서비스의 IP/포트가 외부에 노출됩니다.

---

## 3. 주요 역할 및 기능

### 3.1 라우팅

클라이언트의 요청을 적절한 내부 서비스(주문, 결제 등)로 전달합니다. 내부 IP와 포트를 외부로부터 은닉하여 보안을 강화합니다.

### 3.2 인증 및 인가

토큰 검증, OAuth 인증 등 보안 관련 공통 기능을 통합 관리합니다. 개별 서비스가 인증 로직을 각자 구현할 필요가 없어집니다.

### 3.3 프로토콜 변환

외부의 HTTP 요청을 내부에서 사용하는 gRPC 등 다른 프로토콜로 변환하거나, 응답 포맷을 규격화합니다.

### 3.4 공통 정책 적용

- **Rate Limiting:** 호출 횟수 제한
- **Throttling:** 트래픽 제어
- **IP 차단:** 블랙리스트 관리

보안 정책을 일관되게 적용할 수 있습니다.

### 3.5 관측성 및 장애 격리

- 통신 로그와 트레이스 ID 관리
- 서킷 브레이커를 통한 장애 격리: 특정 서비스 장애가 전체로 전파되지 않도록 Fail Fast 처리

---

## 4. 배치 전략

| 전략 | 설명 | 적합한 상황 |
|------|------|-------------|
| **Single Gateway** | 단일 게이트웨이 구조 | 초기 단계, 소규모 서비스 |
| **BFF (Backend for Frontend)** | PC, 모바일 등 기기별로 게이트웨이 분리 | 클라이언트별 요구사항이 다른 경우 |
| **계층형 구조** | Edge에서 보안 처리, 내부 게이트웨이에서 상세 라우팅 | 대규모 서비스 |

---

## 5. 주요 구현체

| 구현체 | 특징 |
|--------|------|
| **Spring Cloud Gateway** | Java/Spring 진영, 리액티브 기반 |
| **Kong** | 인프라 기반, 플러그인 생태계 |
| **Nginx** | 고성능 리버스 프록시 |
| **AWS API Gateway** | 관리형 서비스, 서버리스 연동 |
| **NestJS** | Node.js 진영 |

---

## 6. 한계점 및 고려사항

### 6.1 비즈니스 로직 분리 (안티패턴 주의)

게이트웨이는 '교통 경찰' 역할에 집중해야 합니다. 다음은 피해야 할 안티패턴입니다.

- DB 직접 접근
- 복잡한 비즈니스 로직 포함
- 트랜잭션 처리

과도한 기능을 담으면 또 다른 '거대 모놀리식'이 됩니다.

### 6.2 단일 실패 지점(SPOF) 방지

게이트웨이 장애는 전체 시스템 마비로 이어집니다. 반드시 이중화 구성이 필요합니다.

### 6.3 성능 최적화

네트워크 홉(Hop)이 추가되는 구조이므로, 게이트웨이 내부 로직은 최대한 가볍게 유지해야 합니다. 성능 병목 지점이 되지 않도록 주의가 필요합니다.

---

## 관련 문서

- [[Docker]] - API Gateway 컨테이너 배포 시 참고
- [[멱등성]] - API 설계 시 멱등성 보장 원칙

---

## 참고 자료

- [API 게이트웨이 개념 및 설계](http://www.youtube.com/watch?v=CVQy7G--49k) - 영상 자료
